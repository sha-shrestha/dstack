{"version":3,"file":"hooks.modern.js","sources":["../src/hooks/usePrevious.js","../src/hooks/useOnClickOutside.js","../src/validations/index.js","../src/hooks/useForm.js","../src/hooks/useIntersectionObserver.js","../src/hooks/useDebounce.js","../src/hooks/useTimeout.js"],"sourcesContent":["import {useEffect, useRef} from 'react';\n\nexport default value => {\n    const ref = useRef(value);\n\n    useEffect(() => {\n        ref.current = value;\n    }, [value]);\n\n    return ref.current;\n};\n","import {useEffect} from 'react';\n\nexport default (ref, handler) => {\n    useEffect(\n        () => {\n            const listener = event => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n\n                handler(event);\n            };\n\n            document.addEventListener('mousedown', listener);\n            document.addEventListener('touchstart', listener);\n\n            return () => {\n                document.removeEventListener('mousedown', listener);\n                document.removeEventListener('touchstart', listener);\n            };\n        },\n\n        [ref, handler]\n    );\n};\n","export const isValidUserName = userName => {\n    const errors = {\n        notAllowedCharacters: 'notAllowedCharacters',\n        tooShort: 'tooShort',\n        tooLong: 'tooLong',\n    };\n\n    const testRegexp = /^[a-zA-Z0-9-_]+$/;\n\n    if (userName.length < 3)\n        return {\n            isValid: false,\n            error: errors.tooShort,\n        };\n\n    if (userName.length > 24)\n        return {\n            isValid: false,\n            error: errors.tooLong,\n        };\n\n    if (!testRegexp.test(userName) || /--/.test(userName))\n        return {\n            isValid: false,\n            error: errors.notAllowedCharacters,\n        };\n\n    return {isValid: true};\n};\n\nexport const isEmail = value => {\n    return /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(value);\n};\n\nexport const isRequired = value => {\n    return !(value === null || value === undefined || value === '');\n};\n\nexport const noSpaces = value => {\n    return /^[\\S]*$/.test(value);\n};\n\nexport const isValidStackName = value => {\n    return /^[^\\/]/.test(value) && /^[a-zA-Z0-9\\/_]+$/.test(value);\n};\n\nexport const isValidEmail = mail => {\n    const errors = {invalidEmailAddress: 'invalidEmailAddress'};\n\n    if (!isEmail(mail))\n        return {\n            isValid: false,\n            error: errors.invalidEmailAddress,\n        };\n\n    return {isValid: true};\n};\n\nexport const isValidPassword = password => {\n    const errors = {mustNotBeEmpty: 'mustNotBeEmpty'};\n\n    if (password.length === 0)\n        return {\n            isValid: false,\n            error: errors.mustNotBeEmpty,\n        };\n\n    return {isValid: true};\n};","// @flow\nimport {useState} from 'react';\nimport {isRequired, isEmail, noSpaces, isValidStackName} from '../validations';\n\nconst validationMap = {\n    required: isRequired,\n    email: isEmail,\n    'no-spaces-stack': noSpaces,\n    'stack-name': isValidStackName,\n};\n\nconst getValidationFunction = (validator: Function | string): Function => {\n    if (typeof validator === 'string' && validationMap[validator])\n        return validationMap[validator];\n\n    if (typeof validator === 'function')\n        return validator;\n\n    return () => true;\n};\n\nexport default (\n    initialFormState: {[key: string]: any},\n    fieldsValidators: {[key: string]: Array<Function> | Function} = {}\n): {} => {\n    const [form, setForm] = useState(initialFormState);\n    const [formErrors, setFormErrors] = useState({});\n\n    const onChange = (eventOrName, value) => {\n        let name;\n\n        let fieldValue;\n\n        if (eventOrName.target) {\n            const event = eventOrName;\n\n            fieldValue = event.target.type === 'checkbox'\n                ? event.target.checked\n                : event.target.value;\n\n            name = event.target.name;\n        } else {\n            name = eventOrName;\n            fieldValue = value;\n        }\n\n        setForm({\n            ...form,\n            [name]: fieldValue,\n        });\n\n        setFormErrors({\n            ...formErrors,\n            [name]: [],\n        });\n    };\n\n    const resetForm = () => {\n        setForm(initialFormState);\n        setFormErrors({});\n    };\n\n    const getFieldErrors = fieldName => {\n        const errors = [];\n\n        if (Array.isArray(fieldsValidators[fieldName]))\n            fieldsValidators[fieldName].forEach(validator => {\n                const isValid = getValidationFunction(validator);\n\n                if (!isValid(form[fieldName]))\n                    errors.push(validator);\n            });\n\n        if (typeof fieldsValidators[fieldName] === 'string') {\n            const isValid = getValidationFunction(fieldsValidators[fieldName]);\n\n            if (!isValid(form[fieldName]))\n                errors.push(fieldsValidators[fieldName]);\n        }\n\n        return errors;\n    };\n\n    const checkValidForm = () => {\n        let isValid = true;\n        const newFormErrors = {};\n\n        Object.keys(fieldsValidators)\n            .forEach(fieldName => {\n                const errors = getFieldErrors(fieldName);\n\n                newFormErrors[fieldName] = errors;\n                isValid = isValid && !errors.length;\n            });\n\n        setFormErrors(newFormErrors);\n        return isValid;\n    };\n\n    return {\n        form,\n        setForm,\n        formErrors,\n        setFormErrors,\n        resetForm,\n        onChange,\n        checkValidForm,\n    };\n};\n","// @flow\nimport {useCallback, useEffect, useRef} from 'react';\n\nexport default (\n    callBack: Function,\n\n    {\n        rootMargin = '0px',\n        threshold = 0.01,\n        root = null,\n    }: {[key: string]: any},\n\n    deps: Array<any>\n) => {\n    const ref = useRef(null);\n\n    const intersectionCallback = useCallback(([target]) => {\n        if (target.isIntersecting) {\n            callBack();\n        }\n    }, deps);\n\n    useEffect(() => {\n        const options = {\n            root,\n            rootMargin,\n            threshold,\n        };\n\n        const observer = new IntersectionObserver(intersectionCallback, options);\n\n        if (ref && ref.current)\n            observer.observe(ref.current);\n\n        return () => {\n            if (ref.current)\n                observer.unobserve(ref.current);\n        };\n    }, [ref, intersectionCallback]);\n\n    return [ref];\n};","// @flow\nimport {useCallback} from 'react';\nimport {debounce as _debounce} from 'lodash-es';\n\nexport default (callback: Function, depsOrDelay: Array<any> | number, deps: Array<any>) => {\n    let delay = 300;\n\n    if (typeof depsOrDelay === 'number')\n        delay = depsOrDelay;\n    else\n        deps = depsOrDelay;\n\n\n    return useCallback(_debounce(callback, delay), deps);\n};","// @flow\nimport {useEffect, useCallback, useRef} from 'react';\n\nconst useTimeout = (\n    callback, // function to call. No args passed.\n    timeout = 0, // delay, ms (default: immediately put into JS Event Queue)\n) => {\n    const timeoutIdRef = useRef();\n    const cancel = useCallback(\n        () => {\n            const timeoutId = timeoutIdRef.current;\n\n            if (timeoutId) {\n                timeoutIdRef.current = undefined;\n                clearTimeout(timeoutId);\n            }\n        },\n        [timeoutIdRef],\n    );\n\n    useEffect(\n        () => {\n            timeoutIdRef.current = setTimeout(callback, timeout);\n            return cancel;\n        },\n        [callback, timeout, cancel],\n    );\n\n    return cancel;\n};\n\nexport default useTimeout;"],"names":["value","ref","useRef","useEffect","current","handler","listener","event","contains","target","document","addEventListener","removeEventListener","isEmail","test","isRequired","undefined","noSpaces","isValidStackName","validationMap","required","email","getValidationFunction","validator","initialFormState","fieldsValidators","form","setForm","useState","formErrors","setFormErrors","onChange","eventOrName","name","fieldValue","type","checked","resetForm","getFieldErrors","fieldName","errors","Array","isArray","forEach","isValid","push","checkValidForm","newFormErrors","Object","keys","length","callBack","rootMargin","threshold","root","deps","intersectionCallback","useCallback","isIntersecting","options","observer","IntersectionObserver","observe","unobserve","callback","depsOrDelay","delay","_debounce","useTimeout","timeout","timeoutIdRef","cancel","timeoutId","clearTimeout","setTimeout"],"mappings":"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"}